"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5178],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=o,h=c["".concat(l,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2735:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={slug:"mpe-support-added",title:"MIDIVal 0.1 release \u2014 now with MPE support!",authors:["kulak"],tags:["midival","mpe","release"]},i=void 0,s={permalink:"/blog/mpe-support-added",source:"@site/blog/2023-05-22/index.md",title:"MIDIVal 0.1 release \u2014 now with MPE support!",description:"MIDIVal MPE Cover",date:"2023-05-22T00:00:00.000Z",formattedDate:"May 22, 2023",tags:[{label:"midival",permalink:"/blog/tags/midival"},{label:"mpe",permalink:"/blog/tags/mpe"},{label:"release",permalink:"/blog/tags/release"}],readingTime:3.405,hasTruncateMarker:!0,authors:[{name:"Kacper Kula",title:"Author and Maintainer of MIDIVal",url:"https://github.com/kulak-at",imageURL:"https://avatars.githubusercontent.com/u/2923943?v=4",key:"kulak"}],frontMatter:{slug:"mpe-support-added",title:"MIDIVal 0.1 release \u2014 now with MPE support!",authors:["kulak"],tags:["midival","mpe","release"]},nextItem:{title:"New MIDIVal releases: core 0.0.17, node 0.0.2 and react-native!",permalink:"/blog/midival-0-0-17-released"}},l={authorsImageUrls:[void 0]},p=[{value:"What is MPE?",id:"what-is-mpe",level:2},{value:"Getting started with MPE in MIDIVal",id:"getting-started-with-mpe-in-midival",level:2},{value:"Sending MPE messages",id:"sending-mpe-messages",level:3},{value:"Receiving MPE messages",id:"receiving-mpe-messages",level:3},{value:"Test it now",id:"test-it-now",level:2},{value:"API Docs",id:"api-docs",level:2},{value:"Join the community",id:"join-the-community",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"MIDIVal MPE Cover",src:n(3559).Z,width:"3840",height:"2160"})),(0,o.kt)("p",null,"MIDIVal just got a big version bump with exciting new functionality! You can now use the MIDIVal library to send and receive MIDI Polyphonic Expression messages. It is the only high level JavaScript library to add support for this protocol. Thanks to portability of MIDIVal, you can use it in your web, node and react native projects!"),(0,o.kt)("h2",{id:"what-is-mpe"},"What is MPE?"),(0,o.kt)("p",null,"MPE is an extension of the MIDI 1 protocol. MPE, or MIDI Polyphonic Expression, adds the ability to vary pressure, pitch and timbre for each note independently (or in fact any 3 dimensions of your sound). It allows for way more expression in your performances."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Example of 3 notes chord sent to Ableton Live using MIDIVal 0.1. Each note had its pitch bend, pressure and timbre varied independently.",src:n(5165).Z,width:"1280",height:"500"})),(0,o.kt)("p",null,"The specification describes a low-level protocol for communication but fortunately, with the new version of MIDIVal you can use might more user-friendly interface and not care about low-level implementation details."),(0,o.kt)("h2",{id:"getting-started-with-mpe-in-midival"},"Getting started with MPE in MIDIVal"),(0,o.kt)("p",null,"To install the new MIDIVal version, run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn")," targeting version 0.1:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @midival/core@0.1\n# Or using YARN\nyarn add @midival/core@0.1\n")),(0,o.kt)("p",null,"To start communicating with MPE you need to select which MIDI device you want to use. To do so, you can list all input and output devices (same as before in earlier versions of the library):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { MIDIVal } from "@midival/core"\n\nMIDIVal.connect()\n.then(access => {\n const { inputs, outputs } = access\n // Select which input or output you want to use.\n})\n')),(0,o.kt)("h3",{id:"sending-mpe-messages"},"Sending MPE messages"),(0,o.kt)("p",null,"To send MPE messages you need to instantiate ",(0,o.kt)("inlineCode",{parentName:"p"},"MPEMIDIValOutput")," and pass the device you want to use. MPE documentation allows you to define both the lower and upper zone for your device which can be used to split the channel into 2 separately addressable keyboards."),(0,o.kt)("p",null,"Instantiating ",(0,o.kt)("inlineCode",{parentName:"p"},"MPEInputOutput")," will send all necessary setup messages."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { MPEMidivalOutput } from "@midival/core/dist/mpe"\nconst mpeOutput = new MPEMidivalOutput(output,\n    { lowerZoneSize: 7, upperZoneSize: 3 }\n)\n\n')),(0,o.kt)("p",null,"Once the object is set up, you can start sending notes. MIDIVal library will take care of proper routing for your message to corresponding channels."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const note: ActiveNote = mpeOutput.lowerZone.sendNoteOn(64, 120); // [note, velocity]\n")),(0,o.kt)("p",null,"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"ActiveNote")," object you can modify the note during its lifetime and also send noteOff signal:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"note.changeBend(-0.2);\nnote.changeTimbre(20);\nnote.changePressure(50);\n\n// Or if you prefer using coordinates system x,y,z\nnote.x = -0.2;\nnote.y = 20;\nnote.z = 50;\n\n// when you want to send note off\nnote.noteOff()\n")),(0,o.kt)("h3",{id:"receiving-mpe-messages"},"Receiving MPE messages"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'const input = new MPEMidivalInput(new MIDIValInput(input));\ninput.onLowerZoneUpdate(lowerZone => {\n  if (!lowerZone) {\n     console.log("Lower Zone was disabled");\n     return;\n  }\n  lowerZone.onNoteOn(note => {\n    // React to note being pressed.\n  })\n  lowerZone.onNoteOff(note => {\n      // React to note being depressed\n  })\n  lowerZone.onMemberPitchBend(bend => {\n      // React to note being bent\n  })\n  lowerZone.onMemberTimbre(tim => {\n     // React to notes timbre being changed\n  })\n  lowerZone.onMemberPressure(pres => {\n     // React to notes pressure being changed\n  })\n})\n')),(0,o.kt)("p",null,"Similarly, you can react to pitch, timbre and pressure change for the whole zone using ",(0,o.kt)("inlineCode",{parentName:"p"},"onMasterPitchBend"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"onMasterTimbre"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"onMasterPressure"),"."),(0,o.kt)("h2",{id:"test-it-now"},"Test it now"),(0,o.kt)("p",null,"If you have DAW with MPE support you can use the ",(0,o.kt)("a",{parentName:"p",href:"https://midival.github.io/demos/mpe/"},"MIDIVal Demo")," page to send sample MPE messages to it. The website uses the latest version of MIDIVal to send messages. You can enable LFO modulation for each of the notes independently."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Simple test showcasing MIDIValMPE functionality",src:n(7376).Z,width:"3328",height:"562"})),(0,o.kt)("p",null,"If you have an MPE input device, you can use the same website to check notes received, their corresponding channels and modulations."),(0,o.kt)("h2",{id:"api-docs"},"API Docs"),(0,o.kt)("p",null,"For full API documentation of the MPE functionality, ",(0,o.kt)("a",{parentName:"p",href:"https://midival.github.io/core/modules/mpe.html"},"visit @midival/core MPE documentation page"),"."),(0,o.kt)("h2",{id:"join-the-community"},"Join the community"),(0,o.kt)("p",null,"With the release of MIDIVal 0.1.0, I have also launched a Discord channel for anyone interested in the library. If you have questions about the library, want to contribute or even just have a casual chat about MIDI or anything music related, join and drop the message there!"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/5GYK4VhQQ8"},"Join Discord Channel")),(0,o.kt)("p",null,"For more information about MIDIVal, Web MIDI, Web Audio and TypeScript articles, remember to follow me here on Medium!"))}d.isMDXComponent=!0},5165:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ableton-1286498d5dad45ec4e1d1212c24f72e4.webp"},3559:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cover-ec9dab5e36bab1b580822b493910b62c.webp"},7376:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/demo-d39a20e7e2618ffcfaabf1af2427a08d.webp"}}]);